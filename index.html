<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deus Ex Lumen – Erkenntnis. Transformation. Mysterium.</title>
  <meta name="description" content="Deus Ex Lumen – Symbolik entschlüsseln, Narrative hinterfragen, Perspektiven erweitern. Wo Dunkelheit sich ins Licht verwandelt." />
  <meta name="theme-color" content="#7f1d1d" />
  <meta property="og:title" content="Deus Ex Lumen" />
  <meta property="og:description" content="Wo Dunkelheit sich ins Licht verwandelt." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://simgbb.com/avatar/JFZjtDkhxPL0.jpg" />
  <meta property="og:locale" content="de_DE" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Deus Ex Lumen" />
  <meta name="twitter:description" content="Erkenntnis. Transformation. Mysterium." />
  <meta name="twitter:image" content="https://simgbb.com/avatar/JFZjtDkhxPL0.jpg" />
  <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><radialGradient id="g" cx="50%" cy="35%" r="60%"><stop offset="0" stop-color="%23ef4444"/><stop offset="1" stop-color="%230b0b0f"/></radialGradient></defs><rect width="64" height="64" rx="12" fill="url(%23g)"/><path fill="white" fill-opacity=".9" d="M32 8l5.2 10.6 11.8 1.7-8.5 8.3 2 11.7L32 36.6l-10.5 5.7 2-11.7-8.5-8.3 11.8-1.7z"/></svg>' />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js"></script>
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <style>
    :root {
      --dxl-primary:#ef4444; --dxl-primary-700:#b91c1c; --dxl-accent:#f59e0b; --dxl-ink:#e5e7eb;
      --dxl-bg-1:#050506; --dxl-bg-2:#0b0b0f; --dxl-glow:0 0 18px rgba(239,68,68,.65),0 0 48px rgba(239,68,68,.25);
    }
    html{scroll-behavior:smooth}
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";color:var(--dxl-ink);
      background:radial-gradient(1200px 800px at 70% -10%, rgba(239,68,68,.16), transparent 60%),
                 radial-gradient(900px 600px at -10% 30%, rgba(245,158,11,.10), transparent 65%),
                 linear-gradient(180deg, var(--dxl-bg-1) 0%, var(--dxl-bg-2) 100%);}
    .font-cinzel{font-family:'Cinzel',serif}
    .neon{text-shadow:var(--dxl-glow)}
    .glass{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,.08)}
    .noise::before{content:"";position:fixed;inset:-100vmax;pointer-events:none;z-index:0;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="3" stitchTiles="stitch"/></filter><rect filter="url(%23n)" width="100%" height="100%" opacity="0.035"/></svg>');
      mix-blend-mode:soft-light;animation:drift 60s linear infinite}
    @keyframes drift{to{transform:translate3d(50px,30px,0)}}
    .cursor-glow{position:fixed;width:36vmax;height:36vmax;border-radius:50%;pointer-events:none;background:radial-gradient(circle at center, rgba(239,68,68,.16), rgba(239,68,68,.06) 40%, transparent 60%);filter:blur(26px);mix-blend-mode:screen;transform:translate(-50%,-50%);z-index:0}
    .fx-underline{background:linear-gradient(90deg, rgba(239,68,68,.0), rgba(239,68,68,.6), rgba(239,68,68,.0));height:2px;border-radius:999px;box-shadow:0 0 18px rgba(239,68,68,.35)}
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 35px rgba(239,68,68,.18)} .card{transition:transform .3s ease, box-shadow .3s ease}
    .glass ul li::before {
      content: "✦";
      color: #f59e0b;
      margin-right: 0.75rem;
      font-size: 1.2em;
      line-height: 1;
      display: inline-block;
      width: 1.2em;
      text-align: center;
    }
    @media(prefers-reduced-motion:reduce){.noise::before{animation:none}}
  </style>
</head>
<body class="relative noise selection:bg-red-600/40">
  <a href="#main" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-50 focus:bg-black/60 focus:text-white focus:px-3 focus:py-2 focus:rounded-lg">Zum Inhalt springen</a>
  <div id="particles-js" class="pointer-events-none fixed inset-0 -z-10"></div>
  <div class="cursor-glow" id="cursorGlow" aria-hidden="true"></div>
  <nav class="sticky top-0 z-40 glass">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between py-4">
        <a href="#" class="flex items-center gap-3 group">
          <span class="inline-flex items-center justify-center w-10 h-10 rounded-xl bg-gradient-to-br from-red-600 to-amber-500 shadow-lg ring-1 ring-white/10">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l2.2 4.5L19 7l-3.6 3.4L16.4 15 12 12.8 7.6 15l1-4.6L5 7l4.8-.5L12 2z"/></svg>
          </span>
          <span class="font-cinzel text-xl tracking-wide">DEUS EX LUMEN</span>
        </a>
        <div class="hidden md:flex items-center gap-6">
          <a href="#uploads" class="hover:text-white/90">Neueste</a>
          <a href="#playlists" class="hover:text-white/90">Playlists</a>
          <a href="#about" class="hover:text-white/90">Über</a>
          <a href="#kontakt" class="hover:text-white/90">Kontakt</a>
        </div>
        <div class="flex items-center gap-2">
          <button id="fxToggle" class="px-3 py-2 text-sm rounded-lg border border-white/10 hover:bg-white/5" aria-pressed="false" aria-label="Effekte ein-/ausschalten">FX: AN</button>
          <a href="#uploads" class="px-3 py-2 rounded-lg bg-red-700 hover:bg-red-600 shadow-lg transition">Neueste Videos</a>
          <button class="md:hidden p-2 rounded-lg hover:bg-white/5" id="openMenu" aria-label="Menü öffnen"><i data-lucide="menu"></i></button>
        </div>
      </div>
    </div>
  </nav>
  <div id="mobileMenu" class="hidden fixed inset-0 z-50 bg-black/80 backdrop-blur-lg">
    <div class="max-w-sm glass m-6 ml-auto p-6 rounded-2xl space-y-4">
      <button id="closeMenu" class="p-2 rounded-lg hover:bg-white/5 float-right" aria-label="Menü schließen"><i data-lucide="x"></i></button>
      <a href="#uploads" class="block text-lg py-2">Neueste</a>
      <a href="#playlists" class="block text-lg py-2">Playlists</a>
      <a href="#about" class="block text-lg py-2">Über</a>
      <a href="#kontakt" class="block text-lg py-2">Kontakt</a>
    </div>
  </div>
  <header id="main" class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 pointer-events-none">
      <div class="absolute -top-24 -left-20 h-96 w-96 rounded-full blur-3xl opacity-60 bg-red-700/30"></div>
      <div class="absolute bottom-0 right-0 h-[32rem] w-[32rem] rounded-full blur-3xl opacity-40 bg-amber-500/20"></div>
    </div>
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="min-h-[80vh] flex flex-col items-center justify-center text-center gap-6 py-24">
        <div class="relative">
          <img src="https://simgbb.com/avatar/JFZjtDkhxPL0.jpg" alt="Deus Ex Lumen – Profil" class="w-40 h-40 md:w-48 md:h-48 rounded-full ring-4 ring-red-700/70 shadow-2xl object-cover transition-transform duration-500 will-change-transform hover:scale-[1.03]" onerror="this.style.display='none';document.getElementById('avatarFallback').classList.remove('hidden')">
          <div id="avatarFallback" class="hidden w-40 h-40 md:w-48 md:h-48 rounded-full ring-4 ring-red-700/70 shadow-2xl bg-gradient-to-br from-red-700 to-amber-500"></div>
        </div>
        <h1 class="font-cinzel neon text-5xl md:text-7xl font-extrabold tracking-wide">DEUS EX LUMEN</h1>
        <p id="typewriter" class="text-lg md:text-xl text-gray-300 italic">„Wo Dunkelheit sich ins Licht verwandelt.“</p>
        <div class="mt-4 flex flex-wrap items-center justify-center gap-3">
          <a href="#uploads" class="group relative px-6 py-3 rounded-xl bg-red-700 hover:bg-red-600 transition shadow-lg ring-1 ring-white/10">
            <span class="relative z-10 flex items-center gap-2"><i data-lucide="play-circle" class="w-5 h-5"></i> Neueste Videos</span>
            <span class="absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition shadow-[0_0_2rem_rgba(239,68,68,.45)]"></span>
          </a>
          <a href="#about" class="px-6 py-3 rounded-xl border border-red-700/60 hover:bg-red-900/40 transition">Über mich</a>
        </div>
        <div class="mt-10 mx-auto max-w-2xl"><div class="fx-underline"></div></div>
      </div>
    </div>
  </header>
  <section id="uploads" class="relative py-24 bg-gradient-to-b from-transparent via-red-950/20 to-transparent">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-10">
        <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-red-400 neon">Neueste Uploads</h2>
        <p class="text-gray-400 mt-2">Automatisch geladen. Fallback auf Iframe, falls API gesperrt ist.</p>
      </div>
      <div class="grid md:grid-cols-3 gap-6" id="uploadsGrid" aria-live="polite"></div>
      <div class="glass rounded-2xl p-4 md:p-6 shadow-xl mt-8" id="fallbackPlayer" hidden>
        <div class="aspect-video rounded-xl overflow-hidden">
          <iframe class="w-full h-full" src="https://www.youtube.com/embed?listType=user_uploads&list=deusexlumen" title="Neueste Uploads" frameborder="0" allowfullscreen loading="lazy"></iframe>
        </div>
      </div>
    </div>
  </section>
  <section id="playlists" class="py-24">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-red-400 neon">Playlists</h2>
        <p class="text-gray-400 mt-2">Kuratiert – automatisch geladen.</p>
      </div>
      <div class="grid lg:grid-cols-2 gap-8" id="playlistGrids"></div>
    </div>
  </section>
  <section id="about" class="py-24 bg-red-950/20">
    <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-red-400 neon">Über Deus Ex Lumen</h2>
        <p class="text-gray-400 mt-3 text-lg italic">„Erkenntnis. Transformation. Mysterium.“</p>
      </div>

      <div class="glass rounded-2xl p-8 md:p-10 leading-relaxed text-gray-200 space-y-8">
        
        <div class="prose prose-invert max-w-none">
          <p class="text-lg md:text-xl">
            <strong>Deus ex Lumen</strong> ist kein gewöhnliches Projekt. Es ist eine Einladung — ein Ruf —, das Denken neu zu entdecken.
          </p>
          
          <p class="text-lg md:text-xl">
            Hier gilt: <em>Es gibt keine guten oder schlechten Informationen.</em> Jede Information ist ein Werkzeug. Was wir daraus machen, bestimmt unsere Entwicklung — nicht ihre Herkunft.
          </p>
        </div>

        <div class="border-t border-white/10 pt-8">
          <h3 class="font-semibold text-red-400 text-xl mb-6 flex items-center gap-2">
            <i data-lucide="book-open" class="w-5 h-5"></i> Leitprinzipien
          </h3>
          <ul class="space-y-4 text-lg">
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Der Mensch ist weder gut noch schlecht — er ist <strong>formbar durch Information</strong>.
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Kritisches Denken ist keine Gabe — es ist eine <strong>Fähigkeit</strong>, die man lernen und üben muss.
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Freiheit ist das Naturrecht jedes Menschen — sie macht uns zu <strong>Anarchisten und Königen zugleich</strong>.
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Das <strong>Trivium</strong> — Grammatik, Logik und Rhetorik — ist der Schlüssel, um Weisheit bewusst zu kultivieren.
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Paradoxien sind Wegweiser. Wer sie erkennt, wächst in seiner Weisheit — nicht in seiner Gewissheit.
            </li>
            <li class="flex items-start gap-3">
              <span class="mt-1 text-red-500 font-bold">•</span>
              Prinzipien geben Orientierung — solange sie <strong>beweglich bleiben</strong>. Erstarrte Prinzipien verwandeln sich in Dogmen.
            </li>
          </ul>
        </div>

        <div class="border-t border-white/10 pt-8">
          <p class="text-lg md:text-xl">
            <strong>Deus ex Lumen</strong> möchte nicht belehren — sondern zum Fragen ermutigen. 
            Es geht darum, Information als <em>Rohstoff für authentisches Denken</em> zu begreifen — 
            und die eigene Freiheit nicht als abstraktes Ideal, sondern als <em>gelebte Haltung</em> zu erkennen.
          </p>
          
          <p class="text-lg md:text-xl mt-4">
            Dies ist ein Ort für <strong>Suchende</strong>, nicht für fertige Antworten. 
            Ein Ort, an dem <strong>Fragen wichtiger sind als Schlagzeilen</strong>. 
            Ein Prozess, der dazu einlädt, <strong>authentisch, frei und kritisch</strong> zu leben — 
            und das eigene Licht in die Welt zu tragen.
          </p>
        </div>

        <div class="mt-8 text-center">
          <p class="text-sm text-gray-500 italic border-l-4 border-red-500 pl-4">
            „In jedem Schatten ein Licht.“
          </p>
        </div>
      </div>
    </div>
  </section>
  <section id="kontakt" class="py-24">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
      <div class="grid lg:grid-cols-3 gap-8">
        <div class="lg:col-span-2 glass rounded-2xl p-8">
          <h3 class="font-cinzel text-2xl text-red-400 neon mb-4">Lass uns sprechen</h3>
          <p class="text-gray-300 mb-6">Fragen, Kooperationen, Ideen? Schreibe mir eine Nachricht.</p>
          <form class="grid sm:grid-cols-2 gap-4" onsubmit="sendMail(event)">
            <input id="name" type="text" placeholder="Name" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-red-600/60" required>
            <input id="email" type="email" placeholder="E-Mail" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-red-600/60" required>
            <textarea id="message" placeholder="Nachricht" rows="4" class="sm:col-span-2 w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-red-600/60" required></textarea>
            <div class="sm:col-span-2 flex items-center justify-between gap-3">
              <button type="submit" class="px-6 py-3 rounded-xl bg-red-700 hover:bg-red-600 shadow-lg ring-1 ring-white/10 transition flex items-center gap-2 justify-center"><i data-lucide="send"></i> Senden</button>
              <button type="button" onclick="copyMail()" class="px-4 py-3 rounded-xl border border-white/10 hover:bg-white/5 transition flex items-center gap-2"><i data-lucide="clipboard"></i> Mail kopieren</button>
            </div>
          </form>
        </div>
        <div class="glass rounded-2xl p-8">
          <h4 class="font-semibold mb-4">Social & More</h4>
          <ul class="space-y-3 text-gray-300">
            <li class="flex items-center gap-2"><i data-lucide="youtube"></i> <a id="ytLink" href="https://www.youtube.com/@deusexlumen" class="hover:text-white/90" target="_blank" rel="noopener">YouTube</a></li>
            <li class="flex items-center gap-2"><i data-lucide="instagram"></i> <a href="https://www.instagram.com/deus.ex.lumen/" class="hover:text-white/90" target="_blank" rel="noopener">Instagram</a></li>
            <li class="flex items-center gap-2"><i data-lucide="link"></i> <a href="https://deusexlumen.bio.link" class="hover:text-white/90" target="_blank" rel="noopener">Bio Link</a></li>
            <li class="flex items-center gap-2"><i data-lucide="mail"></i> <a id="mailLink" href="mailto:deusexlumen@airmail.cc" class="hover:text-white/90">deusexlumen@airmail.cc</a></li>
          </ul>
        </div>
      </div>
    </div>
  </section>
  <button id="topBtn" class="hidden fixed bottom-6 right-6 bg-red-700 p-3 rounded-full shadow-lg hover:bg-red-600 transition" aria-label="Zurück nach oben">
    <i data-lucide="chevron-up"></i>
  </button>
  <footer class="py-10 text-center bg-black/40 border-t border-white/10">
    <p class="text-gray-400">© <span id="year"></span> Deus Ex Lumen – „In jedem Schatten ein Licht.“</p>
  </footer>
  <script>
    const CONFIG = {
      apiKey: "AIzaSyBEnFQNre_5MWDxMCvnzOmciYd2LkDJuFw",
      brand: { channelQuery: "Deus Ex Lumen", youtubeUrl: "https://www.youtube.com/@deusexlumen" },
      playlists: [
        { id: "PLg0E3JcRs5WYjDCDhwAbPHMvJ4EAp9HzF", title: "MAAT", description: "Die MAAT (Das System)" },
        { id: "PLg0E3JcRs5WbK4PlfETFaf0weiJRytupw", title: "Passio", description: "Die wichtigsten Vorträge von Mark Passio" },
        { id: "PLg0E3JcRs5Wb1cfHJvfV7H5uFOWJm7RhY", title: "Demokratie", description: 'Das Problem mit "unserer" Demokratie' }
      ],
      uploadsMax: 9, 
      playlistItemsMax: 8
    };
    const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));
    lucide.createIcons(); $('#year').textContent = new Date().getFullYear();
    const topBtn=$('#topBtn'); window.addEventListener('scroll',()=>{if(window.scrollY>400)topBtn.classList.remove('hidden');else topBtn.classList.add('hidden')}); topBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));
    let fxEnabled=true; const fxToggle=$('#fxToggle'); function initParticles(){if(!$('#particles-js'))return; particlesJS('particles-js',{particles:{number:{value:90,density:{enable:true,value_area:900}},color:{value:'#ef4444'},shape:{type:'circle'},opacity:{value:0.3},size:{value:2,random:true},line_linked:{enable:true,distance:140,color:'#7f1d1d',opacity:0.4,width:1},move:{enable:true,speed:1}},interactivity:{detect_on:'canvas',events:{onhover:{enable:true,mode:'repulse'},onclick:{enable:true,mode:'push'},resize:true},modes:{repulse:{distance:100,duration:0.4}}},retina_detect:true});} initParticles();
    fxToggle.addEventListener('click',()=>{fxEnabled=!fxEnabled; fxToggle.setAttribute('aria-pressed',String(fxEnabled)); fxToggle.textContent=`FX: ${fxEnabled?'AN':'AUS'}`; const c=$('#particles-js'); if(fxEnabled){c.style.display=''; initParticles();} else {c.style.display='none'; c.querySelectorAll('canvas').forEach(n=>n.remove());}});
    const glow=$('#cursorGlow'); window.addEventListener('pointermove',e=>{glow.style.left=e.clientX+'px'; glow.style.top=e.clientY+'px';});
    const typeEl=$('#typewriter'); const phrases=['„Wo Dunkelheit sich ins Licht verwandelt.“','Symbolik entschlüsseln. Perspektiven erweitern.','Cineastisch · Tiefgründig · Kompromisslos']; let pi=0,ci=0,deleting=false; function typeLoop(){const full=phrases[pi]; if(!deleting){ci++; typeEl.textContent=full.slice(0,ci); if(ci===full.length){deleting=true; setTimeout(typeLoop,1800); return}} else {ci--; typeEl.textContent=full.slice(0,ci); if(ci===0){deleting=false; pi=(pi+1)%phrases.length}} setTimeout(typeLoop,deleting?30:50)} setTimeout(typeLoop,1500);
    const reveal=(el)=>{el.style.opacity=0; el.style.transform='translateY(16px)'; const io=new IntersectionObserver((es)=>{es.forEach(en=>{if(en.isIntersecting){el.style.transition='opacity .7s ease, transform .7s ease'; el.style.opacity=1; el.style.transform='translateY(0)'; io.unobserve(el);}})},{threshold:0.15}); io.observe(el)}; $$('section,.glass').forEach(reveal);
    const YT_API='https://www.googleapis.com/youtube/v3';
    async function fetchJson(url){const res=await fetch(url); if(!res.ok) throw new Error('HTTP '+res.status); return await res.json()}
    async function resolveChannelId(q){const url=`${YT_API}/search?part=snippet&type=channel&q=${encodeURIComponent(q)}&key=${CONFIG.apiKey}`; const data=await fetchJson(url); const item=data.items?.[0]; return item?.snippet?.channelId||item?.id?.channelId||null}
    async function getUploadsPlaylistId(cid){const url=`${YT_API}/channels?part=contentDetails&id=${cid}&key=${CONFIG.apiKey}`; const data=await fetchJson(url); return data.items?.[0]?.contentDetails?.relatedPlaylists?.uploads||null}
    async function getPlaylistItems(pid,max){const url=`${YT_API}/playlistItems?part=snippet&maxResults=${max}&playlistId=${pid}&key=${CONFIG.apiKey}`; const data=await fetchJson(url); return data.items||[]}
    function videoCard(item){const s=item.snippet; const vid=s.resourceId?.videoId; const thumb=s.thumbnails?.maxres?.url||s.thumbnails?.high?.url||s.thumbnails?.medium?.url||s.thumbnails?.default?.url; const title=s.title; const date=new Date(s.publishedAt).toLocaleDateString('de-DE',{year:'numeric',month:'short',day:'2-digit'}); const a=document.createElement('a'); a.href=`https://www.youtube.com/watch?v=${vid}`; a.target='_blank'; a.rel='noopener'; a.className='card group block glass rounded-2xl overflow-hidden ring-1 ring-white/10'; a.innerHTML=`<div class="aspect-video overflow-hidden"><img src="${thumb}" alt="${title}" loading="lazy" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.03]"/></div><div class="p-4"><h3 class="font-semibold leading-snug line-clamp-2">${title}</h3><p class="text-sm text-gray-400 mt-1 flex items-center gap-2"><i data-lucide="calendar" class="w-4 h-4"></i> ${date}</p></div>`; return a}
    function playlistSection({id,title,description},items){const wrap=document.createElement('div'); wrap.className='glass rounded-2xl p-4 md:p-6'; wrap.innerHTML=`<div class="flex items-center justify-between gap-4 mb-4"><div><h3 class="font-semibold text-lg">${title}</h3>${description?`<p class="text-sm text-gray-400">${description}</p>`:''}</div><a href="https://www.youtube.com/playlist?list=${id}" target="_blank" rel="noopener" class="px-3 py-2 rounded-lg bg-red-700 hover:bg-red-600 shadow ring-1 ring-white/10 text-sm flex items-center gap-2"><i data-lucide="youtube"></i> Auf YouTube</a></div><div class="grid sm:grid-cols-2 gap-4" id="grid-${id}"></div>`; const grid=wrap.querySelector(`#grid-${CSS.escape(id)}`); items.forEach(item=>grid.appendChild(videoCard(item))); return wrap}
    async function buildUploads(){const grid=$('#uploadsGrid'); const fallback=$('#fallbackPlayer'); try{const cid=await resolveChannelId(CONFIG.brand.channelQuery); if(!cid) throw new Error('Kein Channel gefunden'); const up=await getUploadsPlaylistId(cid); if(!up) throw new Error('Kein Uploads-Feed'); const items=await getPlaylistItems(up,CONFIG.uploadsMax); if(!items.length) throw new Error('Keine Items'); items.forEach(i=>grid.appendChild(videoCard(i)));}catch(e){console.warn('Uploads Fallback aktiviert:',e); fallback.hidden=false}}
    async function buildPlaylists(){const root=$('#playlistGrids'); for(const pl of CONFIG.playlists){try{const items=await getPlaylistItems(pl.id,CONFIG.playlistItemsMax); if(!items.length) continue; root.appendChild(playlistSection(pl,items));}catch(e){console.warn('Playlist Fehler',pl.id,e)}} if(!CONFIG.playlists.length){root.innerHTML='<div class="text-center text-gray-400 col-span-2">Playlists werden automatisch angezeigt, sobald IDs im CONFIG eingetragen sind. Aktuell siehst du die neuesten Uploads oben.</div>'}}
    (async()=>{const yt=$('#ytLink'); if(yt) yt.href=CONFIG.brand.youtubeUrl; await buildUploads(); await buildPlaylists(); lucide.createIcons();})();
    function sendMail(e){e.preventDefault(); const name=$('#name').value.trim(); const email=$('#email').value.trim(); const message=$('#message').value.trim(); const subject=encodeURIComponent(`Kontakt: ${name}`); const body=encodeURIComponent(`${message}\n\n— ${name}\n${email}`); window.location.href=`mailto:deusexlumen@airmail.cc?subject=${subject}&body=${body}`}
    function copyMail(){const mail=$('#mailLink').getAttribute('href').replace('mailto:',''); navigator.clipboard.writeText(mail).then(()=>{alert('E-Mail-Adresse kopiert: '+mail)})}
  </script>
  <script>if('serviceWorker' in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('./sw.js').catch(console.warn);});}</script>
</body>
</html>
